<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Non-blocking Git-flow · Bractal</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="We’re following a slightly modified version of the popular gitflow approach."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Non-blocking Git-flow · Bractal"/><meta property="og:type" content="website"/><meta property="og:url" content="https://your-docusaurus-test-site.com/blog/2018/11/07/non-blocking-git-flow"/><meta property="og:description" content="We’re following a slightly modified version of the popular gitflow approach."/><meta property="og:image" content="https://your-docusaurus-test-site.com/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://your-docusaurus-test-site.com/img/docusaurus.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://your-docusaurus-test-site.com/blog/atom.xml" title="Bractal Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://your-docusaurus-test-site.com/blog/feed.xml" title="Bractal Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo-icon.png" alt="Bractal"/><h2 class="headerTitleWithLogo">Bractal</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/help" target="_self">Help</a></li><li class=""><a href="/ideas" target="_self">Ideas</a></li><li class="siteNavGroupActive"><a href="/blog/" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Recent Posts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Recent Posts</h3><ul class=""><li class="navListItem"><a class="navItem" href="/blog/2018/11/11/how-to-choose-you-tech-stack">How to choose you Technical Stack</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/11/11/design-for-re-use">Design for Re-use</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/blog/2018/11/07/non-blocking-git-flow">Non-blocking Git-flow</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer postContainer blogContainer"><div class="wrapper"><div class="lonePost"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2018/11/07/non-blocking-git-flow">Non-blocking Git-flow</a></h1><p class="post-meta">November 7, 2018</p><div class="authorBlock"><p class="post-authorName"><a href="https://www.facebook.com/mostafa.El.ganainy.2" target="_blank" rel="noreferrer noopener">Mostafa Elganainy</a></p><div class="authorPhoto"><a href="https://www.facebook.com/mostafa.El.ganainy.2" target="_blank" rel="noreferrer noopener"><img src="https://graph.facebook.com/648262785/picture/?height=200&amp;width=200" alt="Mostafa Elganainy"/></a></div></div></header><div><span><p>We’re following a slightly modified version of the popular gitflow approach.</p>
<h4><a class="anchor" aria-hidden="true" id="background"></a><a href="#background" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><strong>Background</strong></h4>
<p>We use a code review process, based on a merge/pull requests feature supported
by gitlab/github where a feature will be reviewed based on a merged request from
the feature branch to the develop branch. Which is a cool and easy approach to
do code reviews. Where reviewer and feature author keep discussing the comments
and see the changes revisions till the feature is accepted and thus merged into
the develop branch by the reviewer. Also the diffs and all merge details will
stay there forever for reference purposes, even if the source branch
(feature-branch) is deleted.</p>
<!--truncate-->
<h4><a class="anchor" aria-hidden="true" id="why-didn-t-the-standard-approach-work"></a><a href="#why-didn-t-the-standard-approach-work" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><strong>Why didn’t the standard approach work ?</strong></h4>
<p>Well, let’s first look at our case/constraints :</p>
<ol>
<li>Our features are on average 3 weeks worth of work.</li>
<li>Reviewers are reviewing the code with SLA policy of 1 business day. Which
means a feature/task developed by noon of one day, might be reviewed by the
noon of the next day.</li>
<li>Our internal policy, states that no merge request should exceed 400 LOC,
while an average sized feature will be in range of 1000–2000 LOC.</li>
<li>Tasks within the same features are usually inter-dependent, which means to
start a new task, it’s usually far better to have the code of all the
previous tasks of the same feature.</li>
<li>We found no decent built-in way in gitlab/github, to support non-blocking
merge requests. Where author of the feature can merge his work into the
target branch directly, and reviewer still have the ability to review the
work and see merge history. The problem occurs when the branching/merging
history is lost and completely messed up, if the author merged his branch
into the develop branch before the merge request is closed.</li>
</ol>
<p>The above constraints are near to impossible to be satisfied all at the same
time without some corners being cut. For example :</p>
<ol>
<li>The author of the feature will need to wait for the reviewer to give him
comments (up to 24 hours), to avoid submitting code to the feature branch
(Which is being reviewed).</li>
<li>If reviewers let go of the SLA policy, they would suffer from severe context
switching which will leave them with zero productivity at the end of the
day. Since our reviewers are mostly Tech. Leads. Who will be reviewing the
code for several Engineers.</li>
</ol>
<p>So, we tried a solution (Which seems like a working solution till now), which is
detailed in the following section…</p>
<h4><a class="anchor" aria-hidden="true" id="non-blocking-git-flow"></a><a href="#non-blocking-git-flow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Non-blocking Git-flow</h4>
<p>Our model simply depends on feature branches which have a little long life span
(2–4 weeks). With smaller tasks branches, going out and back into the feature
branch itself, rather than directly into the master branch. Those tasks are any
kind of tasks related to a given feature. i.e. bug fixes, enhancements,
sub-tasks, spikes …. etc. The Model will look like the following :</p>
<figure name="6a00" id="6a00" class="graf graf--figure graf-after--p">
<canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="75"></canvas>
<p><noscript class="js-progressiveMedia-inner"><img src="https://cdn-images-1.medium.com/max/720/1*R-0Kg_wvxXqiuUPtsR7lqg.png" alt=""></noscript></p>
</figure>
<p><em>Note : (We excluded the rest of the standard gitflow model to keep the diagram
simple. Otherwise, in the diagram above, there would have been some more details
related to release-branches, hotfixes &amp; master branch)</em></p>
<p>As you see in the above process, we have sacrificed a neat feature provided by
github/gitlab. Which is showing the history of changes between different
versions of the merge. The gain from losing that feature is the ability to have
a non-blocking code review process.</p>
<p>The price that has to be paid here, is the little inconvenience on the behalf of
the reviewer. Since, the reviewer will not have easy to access linking between
the <em>review-comments-fixes-branch</em>, and the original <em>task-branch</em>. He might
need to open two tabs in the browser and do check both at the same time.</p>
<p>For us, till now, this looks like the least price we can pay and satisfy our
constraints. You’re welcome to share your thoughts either on how you’re solving
this problem in your projects, or what you think we could do better…</p>
</span></div></div><div class="blogSocialSection"></div></div><div class="blog-recent"><a class="button" href="/blog">Recent Posts</a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo-icon.png" alt="Bractal" width="66" height="58"/></a><div><h5>Docs</h5><a href="https://github.com/BadrIT/bractal#getting-started">Getting Started</a><a href="https://badrit.github.io/bractal/">API Reference</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://badrit.github.io/bractal/">GitHub</a><a href="https://github.com/BadrIT/bractal#contribution">Contribute</a><a class="github-button" href="https://badrit.github.io/bractal/" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2019 Incorta</section></footer></div></body></html>